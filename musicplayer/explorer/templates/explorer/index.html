<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>游꿧 Explorador de M칰sicas</title>
  {% load static %}
  <link rel="stylesheet" href="{% static 'explorer/style.css' %}">
</head>
<body>
  <header>
    <h1>游꿚 Explorador de M칰sicas</h1>
    <div>Navegando: /{{ subpath }}</div>
  </header>

  <main>
    {% if erro %}
      <p class="error">{{ erro }}</p>
    {% endif %}

    {% if voltar %}
      <div class="voltar">
        <a href="/{{ voltar }}">游댗 Voltar</a>
      </div>
    {% endif %}

    <h2>Pastas:</h2>
    <ul>
      {% for pasta in pastas %}
        <li>
          <span>游늬 <a href="/{{ pasta.caminho }}/">{{ pasta.nome }}</a></span>
        </li>
      {% empty %}
        <li><em>Nenhuma pasta encontrada nesta p치gina.</em></li>
      {% endfor %}
    </ul>

    {% if p_f.paginator.num_pages > 1 %}
      <div style="margin-top: 20px; display: flex; gap: 10px;">
        {% if p_f.has_previous %}
          <a href="?page_pasta={{ p_f.previous_page_number }}&page_musica={{ p_m.number }}">拘勇 Pastas Anteriores</a>
        {% endif %}
        <span>P치gina de pastas: {{ p_f.number }} de {{ p_f.paginator.num_pages }}</span>
        {% if p_f.has_next %}
          <a href="?page_pasta={{ p_f.next_page_number }}&page_musica={{ p_m.number }}">Pr칩ximas Pastas 俱뫮잺</a>
        {% endif %}
      </div>
    {% endif %}

    <h2>M칰sicas:</h2>
    <ul>
      {% for musica in musicas %}
        <li>
          <span>游꿧 {{ musica.nome }}</span>
          <div class="audio-container">
            <audio controls src="/media/{{ musica.caminho }}"></audio>
          </div>
        </li>
      {% empty %}
        <li><em>Nenhuma m칰sica encontrada nesta p치gina.</em></li>
      {% endfor %}
    </ul>

    {% if p_m.paginator.num_pages > 1 %}
      <div style="margin-top: 20px; display: flex; gap: 10px;">
        {% if p_m.has_previous %}
          <a href="?page_pasta={{ p_f.number }}&page_musica={{ p_m.previous_page_number }}">拘勇 M칰sicas Anteriores</a>
        {% endif %}
        <span>P치gina de m칰sicas: {{ p_m.number }} de {{ p_m.paginator.num_pages }}</span>
        {% if p_m.has_next %}
          <a href="?page_pasta={{ p_f.number }}&page_musica={{ p_m.next_page_number }}">Pr칩ximas M칰sicas 俱뫮잺</a>
        {% endif %}
      </div>
    {% endif %}
  </main>
</body>
</html>
